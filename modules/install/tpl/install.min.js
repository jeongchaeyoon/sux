/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in modules 
 * project sux
 * date 15-03-2018
 * @brief jsux Modules Javascript
 **/
jsux.fn=jsux.fn||{},jsux.fn.setupDb={checkForm:function(a){var b=a.db_hostname.value.length,c=a.db_userid.value.length,d=a.db_password.value.length,e=a.db_database.value.length;return b<1?(trace("호스트명을 입력하세요."),a.db_hostname.focus(),!1):c<1?(trace("계정아이디을 입력하세요."),a.db_userid.focus(),!1):d<1?(trace("계정비밀번호를 입력하세요."),a.db_password.focus(),!1):!(e<1)||(trace("데이터베이스명을 입력하세요."),a.db_database.focus(),!1)},sendAndLoad:function(a){var b=!1,c={_method:a._method.value,db_hostname:a.db_hostname.value,db_userid:a.db_userid.value,db_password:a.db_password.value,db_database:a.db_database.value,db_table_prefix:a.db_table_prefix.value},d="";d=a.action,d||alert("Not Exist URL"),b===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),b=!0,jsux.getJSON(d,c,function(a){b=!1,alert(a.msg),"Y"==a.result&&jsux.goURL(jsux.rootPath+"setup-admin")})},setEvent:function(){var a=this;$("form").on("submit",function(b){b.preventDefault();var c=a.checkForm(b.target);c===!0&&a.sendAndLoad(b.target)})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn=jsux.fn||{},jsux.fn.setupAdmin={checkForm:function(a){for(var b=["admin_id","admin_pwd","admin_nickname","admin_email","yourhome"],c=["관리자 아이디를","관리자 비밀번호를","관리자 닉네임을","관리자 이메일을","사이트 주소를"],d=0;d<b.length;d++){var e=a[b[d]];if(!e.value)return trace(c[d]+" 입력하세요."),e.focus(),!1}return!0},createTable:function(){var a=!1,b={_method:"insert"};a===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),a=!0,jsux.getJSON(jsux.rootPath+"create-table",b,function(b){a=!1,trace(b.msg),jsux.goURL(jsux.rootPath)})},sendAndLoad:function(a){var b=this,c=!1,d={_method:a._method.value,admin_id:a.admin_id.value,admin_pwd:a.admin_pwd.value,admin_nickname:a.admin_nickname.value,admin_email:a.admin_email.value,yourhome:a.yourhome.value},e="";e=a.action,e||alert("Not Exist URL"),c===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),c=!0,jsux.getJSON(e,d,function(a){c=!1,trace(a.msg),"Y"==a.result&&b.createTable()})},setEvent:function(){var a=this;$("form[name=f_setup_admin]").on("submit",function(b){b.preventDefault(),a.checkForm(b.target)&&a.sendAndLoad(b.target)})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn=jsux.fn||{},jsux.fn.uninstall={init:function(){}};