var BoardApp=BoardApp||{};BoardApp.Navi=jsux.Model.create(),function(a,b){a.include({el:null,id:"",tmpl:null,total:0,limit:0,currentPage:0,currentActivate:0,direction:"prev",pageGroupNum:1,pageTotalNum:0,limitGroup:1,activateId:1,oldActivate:-1,liLists:null,markup:null,name:null,getName:function(){return this.name},setName:function(a){this.name=a},setUI:function(a){for(var c in a)this[c]=a[c];this.el=b(this.el),this.markup=b(this.tmpl),this.setEvent()},setData:function(a){for(var b in a)this[b]=a[b];this.pageTotalNum=this.total%this.limit!==0?Math.ceil(this.total/this.limit):this.total/this.limit,this.remove(),this.setLayout(),this.activate(this.activateId)},setLayout:function(){var a=[],c=0,d=0,e=0,f=0;this.liLists=[],d=(this.pageGroupNum-1)*this.limitGroup+1,f=d+this.limitGroup,e=f<this.pageTotalNum?this.limitGroup:this.pageTotalNum%this.limitGroup!==0?this.pageTotalNum%this.limitGroup:0,c=d+e;for(var g=d;c>g;g++)a.push({no:g});b(this.markup).tmpl(a).appendTo(this.id),this.el.hasClass("ui-navi-hide")&&this.el.removeClass("ui-navi-hide"),this.el.addClass("ui-navi-show"),this.liLists=this.el.find("li span"),this.currentPage={prev:d,next:c-1},this.currentActivate={prev:1,next:e}},setEvent:function(){var a=this;b(this.el).on("click",function(c){c.preventDefault();var d=c.target.className;-1!==d.indexOf("prev")?a.prev():-1!==d.indexOf("next")?a.next():"SPAN"==c.target.nodeName.toUpperCase()&&a.callPage(b.trim(b(c.target).text()))})},prev:function(){this.direction="prev",this.pageGroupNum--,this.pageGroupNum<1&&(this.pageGroupNum=1),this.remove(),this.setLayout(),this.activate(this.currentActivate[this.direction]),this.dispatchEvent({type:"change",page:this.currentPage[this.direction]})},next:function(){this.direction="next",this.pageGroupNum++,this.pageGroupNum*this.limitGroup>this.pageTotalNum&&(this.pageGroupNum=Math.ceil(this.pageTotalNum/this.limitGroup)),this.remove(),this.setLayout(),this.activate(this.currentActivate[this.direction]),this.dispatchEvent({type:"change",page:this.currentPage[this.direction]})},callPage:function(a){var b=parseInt(a);this.activate(b),this.dispatchEvent({type:"change",page:b})},remove:function(){b(this.id).empty()},activate:function(a){var c=0;if(this.activateId=parseInt(a),isNaN(this.activateId))throw new Error(typeof a+" '"+a+"' is not a Number");b(this.liLists[this.oldActivate]).hasClass("activate")&&b(this.liLists[this.oldActivate]).removeClass("activate"),this.currentNum=c=(this.activateId-1)%this.limit,b(this.liLists[c]).addClass("activate"),this.oldActivate=c}})}(BoardApp.Navi,jQuery);